# Шифр Цезаря — Итоговая лабораторная работа

## Описание

Консольное приложение на C++, реализующее шифр Цезаря для шифрования и дешифрования текстов. Поддерживает русский и английский алфавиты, работает с данными в формате JSON и логирует операции.

**Вариант:** 4  
**Язык:** C++17  
**Автор:** Ермолаев Е.А.  
**Группа:** ПРИ-О-25/1  

---

## Структура проекта

```
caesar-cipher/
├── cipher.h              # Заголовок для шифра
├── cipher.cpp            # Реализация шифра
├── json_parser.h         # Заголовок для JSON парсера
├── json_parser.cpp       # Реализация JSON парсера
├── logger.h              # Заголовок для логгера
├── logger.cpp            # Реализация логгера
├── main.cpp              # Главная программа
├── test_cipher.cpp       # Тесты функций шифра
├── test_json.cpp         # Тесты JSON парсера
├── CMakeLists.txt        # Конфигурация сборки
└── README.md             # Этот файл
```

---

## Требования

- **Компилятор:** GCC 7+ / Clang 5+ / MSVC 2017+
- **CMake:** версия 3.10+
- **ОС:** Linux, macOS, Windows
- **C++ стандарт:** C++17

---

## Сборка проекта

### Linux / macOS

```bash
# Создание директории сборки
mkdir build
cd build

# Конфигурация с CMake
cmake ..

# Компиляция
make

# Запуск приложения
./caesar_cipher

# Запуск тестов
ctest --output-on-failure
```

### Windows (Visual Studio)

```bash
mkdir build
cd build
cmake .. -G "Visual Studio 16 2019"
cmake --build . --config Release
.\Release\caesar_cipher.exe
```

---

## Использование

### Справка по программе

```bash
./caesar_cipher --help
```

### Интерактивное меню

```bash
./caesar_cipher
```

Меню с опциями:
- 1 — Загрузить данные из JSON
- 2 — Зашифровать текст
- 3 — Расшифровать текст
- 4 — Показать логи операций
- 5 — Сохранить результаты
- 0 — Выход

---

## Примеры входных данных (JSON)

```json
[
  {
    "id": 1,
    "content": "Hello, World!"
  },
  {
    "id": 2,
    "content": "Привет, мир!"
  }
]
```

---

## Примеры выходных данных

### Зашифрованный текст (ключ = 7)

```json
[
  {
    "id": 1,
    "content": "Hello, World!",
    "processed_content": "Olmmp, Dsvmk!",
    "key_used": 7,
    "operation": "encrypt"
  }
]
```

---

## Основные функции

### `encryptCaesar(const std::string& text, int key, char lang) -> std::string`

Шифрует текст с заданным ключом.

**Параметры:**
- `text` — исходный текст
- `key` — величина сдвига (1–25 для англ., 1–32 для русс.)
- `lang` — 'E' для английского, 'R' для русского

### `decryptCaesar(const std::string& text, int key, char lang) -> std::string`

Дешифрует текст.

### `isValidKey(int key, char lang) -> bool`

Проверяет валидность ключа.

### `generateRandomKey(char lang) -> int`

Генерирует случайный ключ.

---

## Запуск тестов

```bash
cd build
ctest --output-on-failure
```

Или отдельно:

```bash
./test_cipher
./test_json
```

---

## Обработка ошибок

Программа корректно обрабатывает:

- **Ошибочные ключи** → сообщение об ошибке с допустимым диапазоном
- **Пустой content** → пропускается с предупреждением
- **Невалидный JSON** → детальное сообщение об ошибке
- **Отсутствующие файлы** → сообщение о файле не найден

---

## Тестирование

Все тесты проходят успешно:

- ✓ Шифрование английского текста (ключи 1–25)
- ✓ Шифрование русского текста (ключи 1–32)
- ✓ Сохранение специальных символов и цифр
- ✓ Сохранение регистра букв
- ✓ Пустые строки и граничные случаи
- ✓ Парсинг JSON
- ✓ Логирование операций

---

## Особенности реализации

### Шифр Цезаря

- **Поддерживает два языка:** английский (26 букв) и русский (33 буквы)
- **Сохраняет регистр:** прописные буквы остаются прописными
- **Не трогает спецсимволы:** цифры, пробелы и пунктуация остаются без изменений
- **Циклический сдвиг:** буква 'Z' с ключом 1 становится 'A'

### JSON парсер

- **Рекурсивный парсинг** всех типов JSON
- **Поддержка экранирования** в строках
- **Красивый вывод** с отступами
- **Обработка ошибок** с информативными сообщениями

### Логирование

- **ISO 8601 временные метки**
- **JSON формат** для хранения логов
- **Все операции** записываются в файл


